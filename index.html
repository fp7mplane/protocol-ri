<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mPlane Software Development Kit for Python 3 &mdash; mPlane Software Development Kit 0.9.0 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="mPlane Software Development Kit 0.9.0 documentation" href="#" /> 
  </head>
  <body role="document">
      <div class="header" role="banner"><img class="rightlogo" src="_static/mplane.png" alt="Logo"/><h1 class="heading"><a href="#">
          <span>mPlane Software Development Kit 0.9.0 documentation</span></a></h1>
        <h2 class="heading"><span>mPlane Software Development Kit for Python 3</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="#">Contents</a>
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="module-mplane">
<span id="mplane-software-development-kit-for-python-3"></span><h1>mPlane Software Development Kit for Python 3<a class="headerlink" href="#module-mplane" title="Permalink to this headline">¶</a></h1>
<p>This module provides software development kit for building applications on top of the mPlane protocol. It is organized into serval modules:</p>
<p><a class="reference internal" href="#module-mplane.model" title="mplane.model"><code class="xref py py-mod docutils literal"><span class="pre">mplane.model</span></code></a> implements the mPlane protocol information model: message
types, the element registry, and various support classes. On top of the
information model, the <a class="reference internal" href="#module-mplane.scheduler" title="mplane.scheduler"><code class="xref py py-mod docutils literal"><span class="pre">mplane.scheduler</span></code></a> module defines a framework for
binding <a class="reference internal" href="#mplane.model.Capability" title="mplane.model.Capability"><code class="xref py py-class docutils literal"><span class="pre">mplane.model.Capability</span></code></a> classes to runnable code, and for
invoking that code on the receipt of mPlane Statements; this is used to build
clients and components.</p>
<p>The <a class="reference internal" href="#module-mplane.client" title="mplane.client"><code class="xref py py-mod docutils literal"><span class="pre">mplane.client</span></code></a> module defines interfaces for building clients; the    <code class="docutils literal"><span class="pre">mpcli</span></code> script provides a simple command-line interface to this client.</p>
<p>The <a class="reference internal" href="#module-mplane.component" title="mplane.component"><code class="xref py py-mod docutils literal"><span class="pre">mplane.component</span></code></a> module defines interfaces for building components; the component runtime can be started by running the <code class="docutils literal"><span class="pre">mpcom</span></code> script.</p>
<p>This software is copyright 2013-2015 the mPlane Consortium.
It is made available under the terms of the
<a class="reference external" href="http://www.gnu.org/licenses/lgpl.html">GNU Lesser General Public License</a>,
version 3 or, at your option, any later version.</p>
<div class="section" id="module-mplane.model">
<span id="module-mplane-model"></span><h2>module mplane.model<a class="headerlink" href="#module-mplane.model" title="Permalink to this headline">¶</a></h2>
<p>Information model and element registry for the mPlane protocol.</p>
<p>This module implements Statements and Notifications, the core
messages used by the mPlane protocol to describe measurement
and query schemas, and various other classes to support them.</p>
<p>There are three kinds of Statements:</p>
<blockquote>
<div><ul class="simple">
<li>Capability represents something a component can do</li>
<li>Specification tells a component to do something it
advertised a Capability for</li>
<li>Result returns the results for a Specification in-band</li>
</ul>
</div></blockquote>
<p>Notifications are used to transfer other information between
components and clients. There are four kinds of Notifications:</p>
<blockquote>
<div><ul class="simple">
<li>Receipt notifies that a Result is not yet ready or
that the results of an operation will be indirectly exported.</li>
<li>Redemption is a subsequent attempt to redeem a Receipt.</li>
<li>Withdrawal notifies that a Capability is no longer available.</li>
<li>Interrupt notifies that a running Specification should be stopped.</li>
</ul>
</div></blockquote>
<p>To see how all this fits together, let&#8217;s simulate the message exchange
in a simple ping measurement. Initially, we have to load the default element
registry and programatically create a new empty Capability, as it would
be advertised by the component.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">mplane</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">initialize_registry</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Capability</span><span class="p">()</span>
</pre></div>
</div>
<p>First, we set a temporal scope for the capability. Probe components
generally advertise a temporal scope from the present stretching
into the indeterminate future. In this case, we advertise that the
measurement performed is periodic, by setting the minimum period
supported by the capability: one ping per second.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span><span class="o">.</span><span class="n">set_when</span><span class="p">(</span><span class="s">&quot;now ... future / 1s&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can only ping from one IPv4 address, to any IPv4 address.
Adding a parameter without a constraint makes it unconstrained:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&quot;source.ip4&quot;</span><span class="p">,</span> <span class="s">&quot;10.0.27.2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&quot;destination.ip4&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we define the result columns this measurement can produce. Here,
we want quick reporting of min, max, and mean delays, as well as a
total count of singleton measurements taken and packets lost:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span><span class="o">.</span><span class="n">add_result_column</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.us.min&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span><span class="o">.</span><span class="n">add_result_column</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.us.max&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span><span class="o">.</span><span class="n">add_result_column</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.us.mean&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span><span class="o">.</span><span class="n">add_result_column</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.count&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap</span><span class="o">.</span><span class="n">add_result_column</span><span class="p">(</span><span class="s">&quot;packets.lost&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we have a capability we could transform into JSON and make it
available to clients via the mPlane protocol, or via static
download or configuration:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">capjson</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">unparse_json</span><span class="p">(</span><span class="n">cap</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">capjson</span> 
<span class="go">&#39;{&quot;capability&quot;: &quot;measure&quot;,</span>
<span class="go">  &quot;version&quot;: 1,</span>
<span class="go">  &quot;registry&quot;: &quot;http://ict-mplane.eu/registry/core&quot;,</span>
<span class="go">  &quot;when&quot;: &quot;now ... future / 1s&quot;,</span>
<span class="go">  &quot;parameters&quot;: {&quot;source.ip4&quot;: &quot;10.0.27.2&quot;,</span>
<span class="go">                 &quot;destination.ip4&quot;: &quot;*&quot;},</span>
<span class="go">  &quot;results&quot;: [&quot;delay.twoway.icmp.us.min&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.us.max&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.us.mean&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.count&quot;,</span>
<span class="go">              &quot;packets.lost&quot;]}&#39;</span>
</pre></div>
</div>
<p>On the client side, we&#8217;d receive this capability as a JSON object and turn it
into a capability, from which we generate a specification:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">clicap</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parse_json</span><span class="p">(</span><span class="n">capjson</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Specification</span><span class="p">(</span><span class="n">capability</span><span class="o">=</span><span class="n">clicap</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span>
<span class="go">&lt;specification: measure when now ... future / 1s token e00d7fe8 schema 5ce99352 p(v)/m/r 2(1)/0/5&gt;</span>
</pre></div>
</div>
<p>Here we have a specification with a given token, schema, and 2 parameters,
no metadata, and five result columns.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The schema of the statement is identified by a
schema hash, the first eight hex digits of which are shown for
diagnostic purposes. Statements with identical sets of parameters
and columns (schemas) will have identical schema hashes. Likewise,
the token is defined by the schema as well as the parameter values.</p>
</div>
<p>First, let&#8217;s fill in a specific temporal scope for the measurement:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="o">.</span><span class="n">set_when</span><span class="p">(</span><span class="s">&quot;2017-12-24 22:18:42 + 1m / 1s&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And then let&#8217;s fill in some parameters. All od the parameters whose
single values are already given by their constraints (in this case, source.ip4)
have already been filled in. So let&#8217;s start with the destination.
Note that strings are accepted and automatically parsed using each
parameter&#8217;s primitive type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span><span class="o">.</span><span class="n">set_parameter_value</span><span class="p">(</span><span class="s">&quot;destination.ip4&quot;</span><span class="p">,</span> <span class="s">&quot;10.0.37.2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>And now we can transform this specification and send it back to
the component from which we got the capability:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">specjson</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">unparse_json</span><span class="p">(</span><span class="n">spec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">specjson</span> 
<span class="go">&#39;{&quot;specification&quot;: &quot;measure&quot;,</span>
<span class="go">  &quot;version&quot;: 1,</span>
<span class="go">  &quot;registry&quot;: &quot;http://ict-mplane.eu/registry/core&quot;,</span>
<span class="go">  &quot;token&quot;: &quot;ea839b56bc3f6004e95d780d7a64d899&quot;,</span>
<span class="go">  &quot;when&quot;: &quot;2017-12-24 22:18:42.000000 + 1m / 1s&quot;,</span>
<span class="go">  &quot;parameters&quot;: {&quot;source.ip4&quot;: &quot;10.0.27.2&quot;,</span>
<span class="go">                 &quot;destination.ip4&quot;: &quot;10.0.37.2&quot;},</span>
<span class="go">  &quot;results&quot;: [&quot;delay.twoway.icmp.us.min&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.us.max&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.us.mean&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.count&quot;,</span>
<span class="go">              &quot;packets.lost&quot;]}&#39;</span>
</pre></div>
</div>
<p>On the component side, likewise, we&#8217;d receive this specification as a JSON
object and turn it back into a specification:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">comspec</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parse_json</span><span class="p">(</span><span class="n">specjson</span><span class="p">)</span>
</pre></div>
</div>
<p>The component would determine the measurement, query, or other operation to
run given by the specification, then extract the necessary parameter values, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">comspec</span><span class="o">.</span><span class="n">get_parameter_value</span><span class="p">(</span><span class="s">&quot;destination.ip4&quot;</span><span class="p">)</span>
<span class="go">IPv4Address(&#39;10.0.37.2&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comspec</span><span class="o">.</span><span class="n">when</span><span class="p">()</span><span class="o">.</span><span class="n">period</span><span class="p">()</span>
<span class="go">datetime.timedelta(0, 1)</span>
</pre></div>
</div>
<p>After running the measurement, the component would return the results
by assigning values to parameters which changed and result columns
measured:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Result</span><span class="p">(</span><span class="n">specification</span><span class="o">=</span><span class="n">comspec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">set_when</span><span class="p">(</span><span class="s">&quot;2017-12-24 22:18:42.993000 ... 2017-12-24 22:19:42.991000&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">set_result_value</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.us.min&quot;</span><span class="p">,</span> <span class="mi">33155</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">set_result_value</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.us.mean&quot;</span><span class="p">,</span> <span class="mi">55166</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">set_result_value</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.us.max&quot;</span><span class="p">,</span> <span class="mi">192307</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">set_result_value</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.count&quot;</span><span class="p">,</span> <span class="mi">58220</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">set_result_value</span><span class="p">(</span><span class="s">&quot;packets.lost&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The result can then be serialized and sent back to the client:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">resjson</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">unparse_json</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">resjson</span> 
<span class="go">&#39;{&quot;result&quot;: &quot;measure&quot;,</span>
<span class="go">  &quot;version&quot;: 1,</span>
<span class="go">  &quot;registry&quot;: &quot;http://ict-mplane.eu/registry/core&quot;,</span>
<span class="go">  &quot;token&quot;: &quot;ea839b56bc3f6004e95d780d7a64d899&quot;,</span>
<span class="go">  &quot;when&quot;: &quot;2017-12-24 22:18:42.993000 ... 2017-12-24 22:19:42.991000&quot;,</span>
<span class="go">  &quot;parameters&quot;: {&quot;source.ip4&quot;: &quot;10.0.27.2&quot;,</span>
<span class="go">                 &quot;destination.ip4&quot;: &quot;10.0.37.2&quot;},</span>
<span class="go">  &quot;results&quot;: [&quot;delay.twoway.icmp.us.min&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.us.max&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.us.mean&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.count&quot;,</span>
<span class="go">              &quot;packets.lost&quot;],</span>
<span class="go">  &quot;resultvalues&quot;: [[&quot;33155&quot;, &quot;192307&quot;, &quot;55166&quot;, &quot;58220&quot;, &quot;2&quot;]]}&#39;</span>
</pre></div>
</div>
<p>which can transform them back to a result and extract the values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">clires</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parse_json</span><span class="p">(</span><span class="n">resjson</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clires</span>
<span class="go">&lt;result: measure when 2017-12-24 22:18:42.993000 ... 2017-12-24 22:19:42.991000 token e00d7fe8 schema 5ce99352 p/m/r(r) 2/0/5(1)&gt;</span>
</pre></div>
</div>
<p>If the component cannot return results immediately (for example, because
the measurement will take some time), it can return a receipt instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rcpt</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Receipt</span><span class="p">(</span><span class="n">specification</span><span class="o">=</span><span class="n">comspec</span><span class="p">)</span>
</pre></div>
</div>
<p>This receipt contains all the information in the specification, as well as a token
which can be used to quickly identify it in the future.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rcpt</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
<span class="go">&#39;e00d7fe813cf17eeeea37b313dcfa4e7&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The mPlane protocol specification allows components to assign tokens
however they like. In the reference implementation, the default token
is based on a hash like the schema hash: statements with the same verb,
schema, parameter values, and metadata will have identical default tokens.
A component could, however, assign serial-number based tokens, or tokens
mapping to structures in its own filesystem, etc.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">jsonrcpt</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">unparse_json</span><span class="p">(</span><span class="n">rcpt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">jsonrcpt</span> 
<span class="go">&#39;{&quot;receipt&quot;: &quot;measure&quot;,</span>
<span class="go">  &quot;version&quot;: 1,</span>
<span class="go">  &quot;registry&quot;: &quot;http://ict-mplane.eu/registry/core&quot;,</span>
<span class="go">  &quot;token&quot;: &quot;e00d7fe813cf17eeeea37b313dcfa4e7&quot;,</span>
<span class="go">  &quot;when&quot;: &quot;2017-12-24 22:18:42.000000 + 1m / 1s&quot;,</span>
<span class="go">  &quot;parameters&quot;: {&quot;destination.ip4&quot;: &quot;10.0.37.2&quot;,</span>
<span class="go">                 &quot;source.ip4&quot;: &quot;10.0.27.2&quot;},</span>
<span class="go">  &quot;results&quot;: [&quot;delay.twoway.icmp.us.min&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.us.max&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.us.mean&quot;,</span>
<span class="go">              &quot;delay.twoway.icmp.count&quot;,</span>
<span class="go">              &quot;packets.lost&quot;],}&#39;</span>
</pre></div>
</div>
<p>The component keeps the receipt, keyed by token, and returns it to the
client in a message. The client then which generates a future redemption
referring to this receipt to retrieve the results:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">clircpt</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parse_json</span><span class="p">(</span><span class="n">jsonrcpt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clircpt</span>
<span class="go">&lt;receipt: e00d7fe813cf17eeeea37b313dcfa4e7&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdpt</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Redemption</span><span class="p">(</span><span class="n">receipt</span><span class="o">=</span><span class="n">clircpt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rdpt</span>
<span class="go">&lt;redemption: e00d7fe813cf17eeeea37b313dcfa4e7&gt;</span>
</pre></div>
</div>
<p>Note here that the redemption has the same token as the receipt;
just the token may be sent back to the component to retrieve the
results:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">unparse_json</span><span class="p">(</span><span class="n">rdpt</span><span class="p">,</span> <span class="n">token_only</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> 
<span class="go">&#39;{&quot;redemption&quot;: &quot;measure&quot;,</span>
<span class="go">  &quot;version&quot;: 1,</span>
<span class="go">  &quot;registry&quot;: &quot;http://ict-mplane.eu/registry/core&quot;,</span>
<span class="go">  &quot;token&quot;: &quot;e00d7fe813cf17eeeea37b313dcfa4e7&quot;</span>
<span class="go">}&#39;</span>
</pre></div>
</div>
<p>As long as the measurement is running, the client can stop the measurement by sending an
interrupt:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">irpt</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Interrupt</span><span class="p">(</span><span class="n">specification</span><span class="o">=</span><span class="n">spec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">jsonrcpt</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">unparse_json</span><span class="p">(</span><span class="n">irpt</span><span class="p">)</span>
</pre></div>
</div>
<p>The component receives the interrupt, stops the measurement and returns the results of
performed measurement.</p>
<p>Otherwise, in case the component cannot perform the speficied operation, it sends a
withdrawal to cancel the previously advertised capability:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">wtdr</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Withdrawal</span><span class="p">(</span><span class="n">capability</span><span class="o">=</span><span class="n">cap</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">unparse_json</span><span class="p">(</span><span class="n">wtdr</span><span class="p">)</span> 
<span class="go">&#39;{&quot;withdrawal&quot;: &quot;measure&quot;,</span>
<span class="go">&quot;version&quot;: 1,</span>
<span class="go">&quot;registry&quot;: &quot;http://ict-mplane.eu/registry/core&quot;,</span>
<span class="go">&quot;token&quot;: &quot;d7e9df75145e209e144bf9c06e7a9d2f&quot;,</span>
<span class="go">&quot;when&quot;: &quot;now ... future / 1s&quot;,</span>
<span class="go">&quot;parameters&quot;: {&quot;destination.ip4&quot;: &quot;*&quot;,</span>
<span class="go">&quot;source.ip4&quot;: &quot;10.0.27.2&quot;},</span>
<span class="go">&quot;results&quot;: [&quot;delay.twoway.icmp.us.min&quot;,</span>
<span class="go">&quot;delay.twoway.icmp.us.max&quot;,</span>
<span class="go">&quot;delay.twoway.icmp.us.mean&quot;,</span>
<span class="go">&quot;delay.twoway.icmp.count&quot;,</span>
<span class="go">&quot;packets.lost&quot;]</span>
<span class="go">}&#39;</span>
</pre></div>
</div>
<p>Further several messages can be send at once by using an Envelope,
e.g. a component could announce serval capabilites at once.</p>
<p>In case of our simple ping component we create a second capability
that only provides the mean of the measurement values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cap2</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Capability</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap2</span><span class="o">.</span><span class="n">set_when</span><span class="p">(</span><span class="s">&quot;now ... future / 1s&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap2</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&quot;source.ip4&quot;</span><span class="p">,</span> <span class="s">&quot;10.0.27.2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap2</span><span class="o">.</span><span class="n">add_parameter</span><span class="p">(</span><span class="s">&quot;destination.ip4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cap2</span><span class="o">.</span><span class="n">add_result_column</span><span class="p">(</span><span class="s">&quot;delay.twoway.icmp.us.mean&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we create an Envelope and append the two capabilities.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">Envelope</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">append_message</span><span class="p">(</span><span class="n">cap</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">append_message</span><span class="p">(</span><span class="n">cap2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span>  
<span class="go">&lt;Envelope message (2):</span>
<span class="go"> &lt;capability: measure when now ... future / 1s token d7e9df75 schema 5ce99352 p/m/r 2/0/5&gt;</span>
<span class="go"> &lt;capability: measure when now ... future / 1s token a9ec7fce schema ea37cea5 p/m/r 2/0/1&gt;</span>
<span class="go">&gt;</span>
</pre></div>
</div>
<p>Similar as with every other message this Envelope is serialized and send to the client:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">envjson</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">unparse_json</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
</pre></div>
</div>
<p>The client receives the Envelope and decomposes the encapsulated messages:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">clienv</span> <span class="o">=</span> <span class="n">mplane</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parse_json</span><span class="p">(</span><span class="n">envjson</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">message</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">clienv</span><span class="o">.</span><span class="n">messages</span><span class="p">()]</span>
</pre></div>
</div>
<dl class="class">
<dt id="mplane.model.BareNotification">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">BareNotification</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>token=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#BareNotification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.BareNotification" title="Permalink to this definition">¶</a></dt>
<dd><p>Notifications are used to send additional information between
mPlane clients and components other than measurement statements.
Notifications can either be part of a normal measurement workflow
(as Receipts and Redemptions) or signal exceptional conditions
(as Withdrawals and Interrupts).</p>
<p>This class contains implementation common to all Notifications
which do not contain any information from a related Capability
or Specification.</p>
</dd></dl>

<dl class="class">
<dt id="mplane.model.Capability">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Capability</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>verb='measure'</em>, <em>label=None</em>, <em>token=None</em>, <em>when=None</em>, <em>reguri=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Capability"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Capability" title="Permalink to this definition">¶</a></dt>
<dd><p>A Capability represents something an mPlane component can do.
Capabilities contain verbs (strings identifying the thing the
component can do), parameters (which must be given by a client
in a Specification in order for the component to do that thing),
metadata (additional information about the process used to do
that thing), and result columns (the data that thing will return).</p>
<p>Capabilities can either be created programatically, using the
add_parameter(), add_metadata(), and add_result_column()
methods, or by reading from a JSON object using parse_json().</p>
<dl class="method">
<dt id="mplane.model.Capability.set_when">
<code class="descname">set_when</code><span class="sig-paren">(</span><em>when</em>, <em>force=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Capability.set_when"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Capability.set_when" title="Permalink to this definition">¶</a></dt>
<dd><p>By default, changes to capability temporal scopes are always forced.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Capability.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Capability.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Capability.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that this is a valid Capability; i.e., capabilites can not parameter nor results values.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Element">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Element</code><span class="sig-paren">(</span><em>name</em>, <em>prim</em>, <em>desc=None</em>, <em>namespace='http://ict-mplane.eu/registry/core'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element" title="Permalink to this definition">¶</a></dt>
<dd><p>An Element represents a name for a particular type of data with
a specific semantic meaning; it is analogous to an IPFIX Information
Element, or a named column in a relational database.</p>
<p>An Element has a Name by which it can be compared to other Elements,
and a primitive type, which it uses to convert values to and from
strings.</p>
<p>The mPlane reference implementation includes a default registry of
elements; use initialize_registry() to use these.</p>
<dl class="method">
<dt id="mplane.model.Element.compatible_with">
<code class="descname">compatible_with</code><span class="sig-paren">(</span><em>rval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element.compatible_with"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element.compatible_with" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines based on naming rules if this element is compatible with
element rval; that is, if transformation_to will return a function
for turning a value of this element to the other. Compatibility based
on name structure is a future feature; this method currently checks for
name equality only.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Element.desc">
<code class="descname">desc</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element.desc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element.desc" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the description of this Element</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Element.name">
<code class="descname">name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element.name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of this Element</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Element.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>sval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element.parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a string to a value for this Element; delegates to primitive.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Element.primitive_name">
<code class="descname">primitive_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element.primitive_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element.primitive_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of this Element&#8217;s primitive</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Element.qualified_name">
<code class="descname">qualified_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element.qualified_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element.qualified_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of this Element along with its namespace</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Element.transformation_to">
<code class="descname">transformation_to</code><span class="sig-paren">(</span><em>rval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element.transformation_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element.transformation_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function which will transform values of this element
into values of element rval; used to support unit conversions.
This is a future feature, and is currently a no-op.
Only valid if compatible_with returns True.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Element.unparse">
<code class="descname">unparse</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Element.unparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Element.unparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a value to a string for this Element; delegates to primitive.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Envelope">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Envelope</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>content_type='message'</em>, <em>token=None</em>, <em>label=None</em>, <em>when=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Envelope"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Envelope" title="Permalink to this definition">¶</a></dt>
<dd><p>Envelopes are used to contain other Messages.</p>
<dl class="method">
<dt id="mplane.model.Envelope.append_message">
<code class="descname">append_message</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Envelope.append_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Envelope.append_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a message to an Envelope</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Envelope.get_label">
<code class="descname">get_label</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Envelope.get_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Envelope.get_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the label or None if no label has been set</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Envelope.get_token">
<code class="descname">get_token</code><span class="sig-paren">(</span><em>lim=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Envelope.get_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Envelope.get_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the token or None if no token has been set</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Envelope.messages">
<code class="descname">messages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Envelope.messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Envelope.messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator to iterate over all messages in an Envelope</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Envelope.trim">
<code class="descname">trim</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Envelope.trim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Envelope.trim" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes everything except the last n elements</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Envelope.when">
<code class="descname">when</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Envelope.when"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Envelope.when" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the envelope&#8217;s temporal scope. (If it&#8217;s a bunch of multijob results)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Exception">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Exception</code><span class="sig-paren">(</span><em>token=None</em>, <em>dictval=None</em>, <em>errmsg=None</em>, <em>status=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Exception" title="Permalink to this definition">¶</a></dt>
<dd><p>A Component sends an Exception to a Client, or a Client to a
Component, to present a human-readable message about a failure
or non-nominal condition.</p>
<p>The status field is used to store an HTTP
status code corresponding to the exception to the
client and component frameworks.</p>
<dl class="method">
<dt id="mplane.model.Exception.get_token">
<code class="descname">get_token</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Exception.get_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Exception.get_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a token that originates from a message that has caused
the Expection or None if the token was explictly not set</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Interrupt">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Interrupt</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>specification=None</em>, <em>token=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Interrupt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Interrupt" title="Permalink to this definition">¶</a></dt>
<dd><p>An Interrupt cancels a Specification</p>
<dl class="method">
<dt id="mplane.model.Interrupt.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Interrupt.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Interrupt.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that this is a valid Interrupt; performes the same checks as for a Specification.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Metavalue">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Metavalue</code><span class="sig-paren">(</span><em>parent_element</em>, <em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Metavalue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Metavalue" title="Permalink to this definition">¶</a></dt>
<dd><p>A Metavalue is an element which can take an unconstrained value.
Metavalues are used in statement metadata sections.</p>
<dl class="method">
<dt id="mplane.model.Metavalue.get_value">
<code class="descname">get_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Metavalue.get_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Metavalue.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Metavalue.set_value">
<code class="descname">set_value</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Metavalue.set_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Metavalue.set_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value.
If the value is a string it parses it.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Parameter">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Parameter</code><span class="sig-paren">(</span><em>parent_element</em>, <em>constraint=mplane.model.constraint_all</em>, <em>val=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>A Parameter is an element which can take a constraint and a value.
In Capabilities, Parameters have constraints and no value; in
Specifications and Results, Parameters have both constraints and
values.</p>
<dl class="method">
<dt id="mplane.model.Parameter.can_set_value">
<code class="descname">can_set_value</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Parameter.can_set_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Parameter.can_set_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the parameter can take the specified value,
False otherwise.
Either takes a value of the correct type for the associated
Primitive, or a string, which will be parsed to a value of
the correct type.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Parameter.get_single_value">
<code class="descname">get_single_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Parameter.get_single_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Parameter.get_single_value" title="Permalink to this definition">¶</a></dt>
<dd><p>If this parameter&#8217;s Constraint only allows a single value, returns it</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Parameter.get_value">
<code class="descname">get_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Parameter.get_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Parameter.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this Parameter&#8217;s value</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Parameter.has_value">
<code class="descname">has_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Parameter.has_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Parameter.has_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this component has a value.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Parameter.is_single_value">
<code class="descname">is_single_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Parameter.is_single_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Parameter.is_single_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this parameter&#8217;s Constraint only allows a single value</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Parameter.set_single_value">
<code class="descname">set_single_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Parameter.set_single_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Parameter.set_single_value" title="Permalink to this definition">¶</a></dt>
<dd><p>If this Parameter&#8217;s Constraint allows only a single value, and this
Paramater does not yet have a value, set the value to the only one
allowed by the Constraint.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Parameter.set_value">
<code class="descname">set_value</code><span class="sig-paren">(</span><em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Parameter.set_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Parameter.set_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of the Parameter.
Either takes a value of the correct type for the associated Primitive, or
a string, which will be parsed to a value of the correct type.</p>
<p>Raises ValueError if the value is not allowable for the Constraint.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Receipt">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Receipt</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>specification=None</em>, <em>token=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Receipt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Receipt" title="Permalink to this definition">¶</a></dt>
<dd><p>A component presents a receipt to a Client in lieu of a result, when the
result will not be available in a reasonable amount of time; or to confirm
a Specification</p>
<dl class="method">
<dt id="mplane.model.Receipt.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Receipt.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Receipt.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that this is a valid Receipt; performes the same checks as for a Specification.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Redemption">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Redemption</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>receipt=None</em>, <em>token=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Redemption"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Redemption" title="Permalink to this definition">¶</a></dt>
<dd><p>A client presents a Redemption to a component from which it has received
a Receipt in order to get the associated Result.</p>
<dl class="method">
<dt id="mplane.model.Redemption.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Redemption.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Redemption.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that this is a valid Redemption; performes the same checks as for a Specification.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Registry">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Registry</code><span class="sig-paren">(</span><em>uri=None</em>, <em>filename=None</em>, <em>noparse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Registry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Registry" title="Permalink to this definition">¶</a></dt>
<dd><p>A Registry is a collection of named Elements associated with a
namespace URI, from which it is retrieved.</p>
<dl class="method">
<dt id="mplane.model.Registry.uri">
<code class="descname">uri</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Registry.uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Registry.uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the URI by which this registry is known.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Result">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Result</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>specification=None</em>, <em>verb='measure'</em>, <em>label=None</em>, <em>token=None</em>, <em>when=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Result" title="Permalink to this definition">¶</a></dt>
<dd><p>A result is a statement that a component measured
a given set of values at a given point in time, according to a specification.</p>
<p>Results are generally created by passing the specification the new result responds to as the specification= argument to the constructor. A result inherits its token from the specification it responds to.</p>
<dl class="method">
<dt id="mplane.model.Result.schema_dict_iterator">
<code class="descname">schema_dict_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Result.schema_dict_iterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Result.schema_dict_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over each row in this result, yielding a dictionary
mapping all parameter and result column names to their values.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Result.set_result_value">
<code class="descname">set_result_value</code><span class="sig-paren">(</span><em>elem_name</em>, <em>val</em>, <em>row_index=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Result.set_result_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Result.set_result_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a single result value.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Result.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Result.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Result.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that this is a valid Result; i.e., that all parameters have values.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.ResultColumn">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">ResultColumn</code><span class="sig-paren">(</span><em>parent_element</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#ResultColumn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.ResultColumn" title="Permalink to this definition">¶</a></dt>
<dd><p>A ResultColumn is an element which can take an array of values.
In Capabilities and Specifications, this array is empty, while in
Results it has one or more values, such that all the ResultColumns
in the Result have the same number of values.</p>
<dl class="method">
<dt id="mplane.model.ResultColumn.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#ResultColumn.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.ResultColumn.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears values.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Specification">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Specification</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>capability=None</em>, <em>verb='measure'</em>, <em>label=None</em>, <em>token=None</em>, <em>when=None</em>, <em>schedule=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Specification"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Specification" title="Permalink to this definition">¶</a></dt>
<dd><p>A Specification represents a request for an mPlane component to do
something it has advertised in a Capability.
Capabilities contain verbs (strings identifying the thing the
component can do), parameters (which must be given by a client
in a Specification in order for the component to do that thing),
metadata (additional information about the process used to do
that thing), and result columns (the data that thing will return).</p>
<p>Specifications are created either by passing a Capability the
Specification is intended to use as the capability= argument of
the constructor, or by reading from a JSON object (see model.parse_json()).</p>
<dl class="method">
<dt id="mplane.model.Specification.fulfills">
<code class="descname">fulfills</code><span class="sig-paren">(</span><em>capability</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Specification.fulfills"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Specification.fulfills" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this Speficication fulfills the Capability</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Specification.is_schedulable">
<code class="descname">is_schedulable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Specification.is_schedulable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Specification.is_schedulable" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine if a specification can be scheduled &#8211; i.e., that its
temporal scope refers to some time in the future at which a
measurement or other operation should take place, or some range of
time for which existing data should be searched and/or retrieved.</p>
<p>Currently, this just checks to see whether the verb is &#8216;query&#8217;.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Specification.retoken">
<code class="descname">retoken</code><span class="sig-paren">(</span><em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Specification.retoken"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Specification.retoken" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a new token, if necessary, taking into account the current time
if a specification has a relative temporal scope.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Specification.subspec_iterator">
<code class="descname">subspec_iterator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Specification.subspec_iterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Specification.subspec_iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over subordinate specifications if this specification is repeated
(i.e., has a repeated Temporal Scope); otherwise yields self once. Each subordinate
specification has an absolute temporal scope derived from this specification&#8217;s
relative temporal scope and schedule.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Specification.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Specification.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Specification.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that this is a valid Specification; i.e., that all parameters have values.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Statement">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Statement</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>verb='measure'</em>, <em>label=None</em>, <em>token=None</em>, <em>when=None</em>, <em>reguri=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement" title="Permalink to this definition">¶</a></dt>
<dd><p>A Statement is an assertion about the properties of a measurement
or other action performed by an mPlane component. This class
contains common implementation for the three kinds of mPlane
statement. Clients and components should use the
<a class="reference internal" href="#mplane.model.Capability" title="mplane.model.Capability"><code class="xref py py-class docutils literal"><span class="pre">mplane.model.Capability</span></code></a>, <a class="reference internal" href="#mplane.model.Specification" title="mplane.model.Specification"><code class="xref py py-class docutils literal"><span class="pre">mplane.model.Specification</span></code></a>,
and <a class="reference internal" href="#mplane.model.Result" title="mplane.model.Result"><code class="xref py py-class docutils literal"><span class="pre">mplane.model.Result</span></code></a> classes instead.</p>
<dl class="method">
<dt id="mplane.model.Statement.add_metadata">
<code class="descname">add_metadata</code><span class="sig-paren">(</span><em>elem_name</em>, <em>val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.add_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.add_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Programatically adds a metadata element to this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.add_parameter">
<code class="descname">add_parameter</code><span class="sig-paren">(</span><em>elem_name</em>, <em>constraint=mplane.model.constraint_all</em>, <em>val=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.add_parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.add_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Programatically adds a parameter to this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.add_result_column">
<code class="descname">add_result_column</code><span class="sig-paren">(</span><em>elem_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.add_result_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.add_result_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Programatically adds a result column to this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.can_set_parameter_value">
<code class="descname">can_set_parameter_value</code><span class="sig-paren">(</span><em>elem_name</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.can_set_parameter_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.can_set_parameter_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether a given Parameter can take a value.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.count_metadata">
<code class="descname">count_metadata</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.count_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.count_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of metavalues in this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.count_parameter_values">
<code class="descname">count_parameter_values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.count_parameter_values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.count_parameter_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of parameters with values in this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.count_parameters">
<code class="descname">count_parameters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.count_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.count_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of parameters in this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.count_result_columns">
<code class="descname">count_result_columns</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.count_result_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.count_result_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of result columns in this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.count_result_rows">
<code class="descname">count_result_rows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.count_result_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.count_result_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of result rows in this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.get_export">
<code class="descname">get_export</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.get_export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.get_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the Statement&#8217;s export URL, which specifies where
results will be indirectly exported.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.get_label">
<code class="descname">get_label</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.get_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.get_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the Statement&#8217;s label.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.get_link">
<code class="descname">get_link</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.get_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.get_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the statement&#8217;s link URL, which specifies where the next message
in the workflow should be sent to or retrieved from.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.get_parameter_value">
<code class="descname">get_parameter_value</code><span class="sig-paren">(</span><em>elem_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.get_parameter_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.get_parameter_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the value for a named parameter on this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.get_single_parameter_value">
<code class="descname">get_single_parameter_value</code><span class="sig-paren">(</span><em>elem_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.get_single_parameter_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.get_single_parameter_value" title="Permalink to this definition">¶</a></dt>
<dd><p>If a given parameter is single-valued returns
that value, otherwise returns None</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.get_token">
<code class="descname">get_token</code><span class="sig-paren">(</span><em>lim=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.get_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.get_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the token of a Statement.
If a token has not been explicitely set,
it returns the default token for the Statement type.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.has_metadata">
<code class="descname">has_metadata</code><span class="sig-paren">(</span><em>elem_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.has_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.has_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the statement has a metadata element with the given name.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.has_parameter">
<code class="descname">has_parameter</code><span class="sig-paren">(</span><em>elem_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.has_parameter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.has_parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the statement has a parameter with the given name.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.has_result_column">
<code class="descname">has_result_column</code><span class="sig-paren">(</span><em>elem_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.has_result_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.has_result_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the statement has results column with the given name.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.metadata_names">
<code class="descname">metadata_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.metadata_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.metadata_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over the names of metadata elements in this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.parameter_names">
<code class="descname">parameter_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.parameter_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.parameter_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over the names of parameters in this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.parameter_values">
<code class="descname">parameter_values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.parameter_values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.parameter_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dict mapping parameter names to values
for each parameter with a value.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.result_column_names">
<code class="descname">result_column_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.result_column_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.result_column_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterates over the names of result columns in this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.set_export">
<code class="descname">set_export</code><span class="sig-paren">(</span><em>export</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.set_export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.set_export" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Statement&#8217;s export URL.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.set_label">
<code class="descname">set_label</code><span class="sig-paren">(</span><em>label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.set_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.set_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the statement&#8217;s label</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.set_link">
<code class="descname">set_link</code><span class="sig-paren">(</span><em>link</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.set_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.set_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the Statement&#8217;s link URL</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.set_parameter_value">
<code class="descname">set_parameter_value</code><span class="sig-paren">(</span><em>elem_name</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.set_parameter_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.set_parameter_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Programatically sets a value for a parameter on this Statement.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.set_when">
<code class="descname">set_when</code><span class="sig-paren">(</span><em>when</em>, <em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.set_when"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.set_when" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the statement&#8217;s temporal scope. Ensures that the temporal scope is
within the previous temporal scope unless force is True.
Takes either an instance of
mplane.model.When, or a string describing the scope.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><em>token_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a Statement to a dictionary (for further conversion
to JSON or YAML), which can be passed as the dictval
argument of the appropriate statement constructor.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.verb">
<code class="descname">verb</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.verb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.verb" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns this statement&#8217;s verb</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.Statement.when">
<code class="descname">when</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Statement.when"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Statement.when" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the statement&#8217;s temporal scope.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.When">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">When</code><span class="sig-paren">(</span><em>valstr=None</em>, <em>a=None</em>, <em>b=None</em>, <em>duration=None</em>, <em>period=None</em>, <em>repeated=False</em>, <em>inner_duration=None</em>, <em>inner_period=None</em>, <em>crontab=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines the temporal scopes for capabilities, results, or
single measurement specifications.</p>
<dl class="method">
<dt id="mplane.model.When.datetimes">
<code class="descname">datetimes</code><span class="sig-paren">(</span><em>tzero=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.datetimes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.datetimes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return start and end times as absolute timestamps
for this temporal scope, relative to a given tzero.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.duration">
<code class="descname">duration</code><span class="sig-paren">(</span><em>tzero=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.duration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the duration of this temporal scope as a timedelta.</p>
<p>If the temporal scope is indefinite in the future, returns None.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.follows">
<code class="descname">follows</code><span class="sig-paren">(</span><em>s</em>, <em>tzero=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.follows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.follows" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this scope follows (is contained by) another.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.in_scope">
<code class="descname">in_scope</code><span class="sig-paren">(</span><em>t</em>, <em>tzero=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.in_scope"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.in_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if time t falls within this scope.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.is_definite">
<code class="descname">is_definite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.is_definite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.is_definite" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this scope defines a definite time
or a definite time interval.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.is_forever">
<code class="descname">is_forever</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.is_forever"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.is_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this scope ends in the indeterminate future.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.is_future">
<code class="descname">is_future</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.is_future"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.is_future" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this is an indefinite future scope.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.is_immediate">
<code class="descname">is_immediate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.is_immediate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.is_immediate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this is an immediate scope (i.e., starts now).</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.is_infinite">
<code class="descname">is_infinite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.is_infinite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.is_infinite" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this scope is completely infinite
(from the infinite past to the infinite future).</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.is_past">
<code class="descname">is_past</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.is_past"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.is_past" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this is an indefinite past scope.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.is_repeated">
<code class="descname">is_repeated</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.is_repeated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.is_repeated" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this temporal scope referes to a
repeated when.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.is_singleton">
<code class="descname">is_singleton</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.is_singleton"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.is_singleton" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if this temporal scope refers to a
singleton measurement. Used in scheduling an enclosing
Specification; has no meaning for Capabilities
or Results.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.iterator">
<code class="descname">iterator</code><span class="sig-paren">(</span><em>tzero=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.iterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.iterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator over When statements generated by a repeated when.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.period">
<code class="descname">period</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.period"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.period" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the period of this temporal scope.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.sort_scope">
<code class="descname">sort_scope</code><span class="sig-paren">(</span><em>t</em>, <em>tzero=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.sort_scope"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.sort_scope" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns &lt; 0 if time t falls before this scope,
0 if time t falls within the scope,
or &gt; 0 if time t falls after this scope.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.model.When.timer_delays">
<code class="descname">timer_delays</code><span class="sig-paren">(</span><em>tzero=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#When.timer_delays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.When.timer_delays" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple with delays for timers to signal the start and end of
a temporal scope, given a specified time zero, which defaults to the
current system time.</p>
<p>The start delay is defined to be zero if the scheduled start time has
already passed or the temporal scope is immediate (i.e., starts now).
The start delay is None if the temporal scope has expired (that is,
the current time is after the calculated end time).</p>
<p>The end delay is defined to be None if the temporal scope has already
expired, or if the temporal scope has no scheduled end (is infinite or
a singleton). End delays are calculated to give priority to duration
when a temporal scope is expressed in terms of duration, and to
prioritize end time otherwise.</p>
<p>Used in scheduling an enclosing Specification for execution.
Has no meaning for Capabilities or Results.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.model.Withdrawal">
<em class="property">class </em><code class="descclassname">mplane.model.</code><code class="descname">Withdrawal</code><span class="sig-paren">(</span><em>dictval=None</em>, <em>capability=None</em>, <em>token=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Withdrawal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Withdrawal" title="Permalink to this definition">¶</a></dt>
<dd><p>A Withdrawal cancels a Capability</p>
<dl class="method">
<dt id="mplane.model.Withdrawal.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#Withdrawal.validate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.Withdrawal.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that this is a valid Withdrawal; performes the same checks as for a Capability.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="mplane.model.element">
<code class="descclassname">mplane.model.</code><code class="descname">element</code><span class="sig-paren">(</span><em>name</em>, <em>reguri=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#element"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.element" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the Element with the given name.
If reguri is given, searches the speficied Registry,
otherwise searches the base Registry.</p>
</dd></dl>

<dl class="function">
<dt id="mplane.model.initialize_registry">
<code class="descclassname">mplane.model.</code><code class="descname">initialize_registry</code><span class="sig-paren">(</span><em>uri='http://ict-mplane.eu/registry/core'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#initialize_registry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.initialize_registry" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the mPlane registry from a URI; if no URI is given,
initializes the registry from the internal core registry.</p>
<p>Call this before doing anything else.</p>
</dd></dl>

<dl class="function">
<dt id="mplane.model.message_from_dict">
<code class="descclassname">mplane.model.</code><code class="descname">message_from_dict</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#message_from_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.message_from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dictionary returned from to_dict(), return a decoded
mPlane message (statement or notification).</p>
</dd></dl>

<dl class="function">
<dt id="mplane.model.parse_constraint">
<code class="descclassname">mplane.model.</code><code class="descname">parse_constraint</code><span class="sig-paren">(</span><em>prim</em>, <em>sval</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#parse_constraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.parse_constraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a primitive and a string value, parses a constraint
string (returned via str(constraint)) into an instance of an
appropriate constraint class.</p>
</dd></dl>

<dl class="function">
<dt id="mplane.model.parse_json">
<code class="descclassname">mplane.model.</code><code class="descname">parse_json</code><span class="sig-paren">(</span><em>jstr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#parse_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.parse_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a JSON object in a string and return the associated mPlane message.</p>
</dd></dl>

<dl class="function">
<dt id="mplane.model.registry_for_uri">
<code class="descclassname">mplane.model.</code><code class="descname">registry_for_uri</code><span class="sig-paren">(</span><em>uri</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#registry_for_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.registry_for_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a registry for a given URI, maintaining a local cache.
Called when parsing statements; generally not useful in client code.</p>
</dd></dl>

<dl class="function">
<dt id="mplane.model.unparse_json">
<code class="descclassname">mplane.model.</code><code class="descname">unparse_json</code><span class="sig-paren">(</span><em>msg</em>, <em>token_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/model.html#unparse_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.model.unparse_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform an mPlane message into a JSON object representing it. If
token_only is True, uses tokens only for message types for which that is
appropriate (i.e. Reciepts, Redemptions, Withdrawals, and Interrupts).</p>
</dd></dl>

</div>
<div class="section" id="module-mplane-scheduler">
<h2>module mplane.scheduler<a class="headerlink" href="#module-mplane-scheduler" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-mplane.scheduler"></span><p>Implements the dynamics of capabilities, specifications, and
results within the mPlane reference component.</p>
<dl class="class">
<dt id="mplane.scheduler.Job">
<em class="property">class </em><code class="descclassname">mplane.scheduler.</code><code class="descname">Job</code><span class="sig-paren">(</span><em>service</em>, <em>specification</em>, <em>session=None</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>A Job binds some running code to an mPlane.model.Specification
within a component. A Job can be thought of as a specific
instance of a Service presently running, or ready to run at some
point in the future.</p>
<p>Each Job will result in a single Result.</p>
<dl class="method">
<dt id="mplane.scheduler.Job.failed">
<code class="descname">failed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Job.failed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Job.failed" title="Permalink to this definition">¶</a></dt>
<dd><p>A job only fails if it is finished and has no results</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Job.finished">
<code class="descname">finished</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Job.finished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Job.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Return False if the job is not complete
and if there are results pending.
Otherwise return True</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Job.get_reply">
<code class="descname">get_reply</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Job.get_reply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Job.get_reply" title="Permalink to this definition">¶</a></dt>
<dd><p>If a result is available for this Job (i.e., if the job is
done running), return it. Otherwise, create a receipt from
the Specification and return that.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Job.interrupt">
<code class="descname">interrupt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Job.interrupt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Job.interrupt" title="Permalink to this definition">¶</a></dt>
<dd><p>Interrupt this job.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Job.schedule">
<code class="descname">schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Job.schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Job.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedule this job to run.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.scheduler.MultiJob">
<em class="property">class </em><code class="descclassname">mplane.scheduler.</code><code class="descname">MultiJob</code><span class="sig-paren">(</span><em>service</em>, <em>specification</em>, <em>session=None</em>, <em>max_results=0</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#MultiJob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.MultiJob" title="Permalink to this definition">¶</a></dt>
<dd><p>A MultiJob spawns multiple jobs determined by its schedule.</p>
<p>Each MultiJob will result in multiple result rows, one for each sub-job.</p>
<dl class="method">
<dt id="mplane.scheduler.MultiJob.failed">
<code class="descname">failed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#MultiJob.failed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.MultiJob.failed" title="Permalink to this definition">¶</a></dt>
<dd><p>A multijob will only fail if it is finished and has no results</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.MultiJob.finished">
<code class="descname">finished</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#MultiJob.finished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.MultiJob.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if all jobs are complete.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.MultiJob.get_reply">
<code class="descname">get_reply</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#MultiJob.get_reply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.MultiJob.get_reply" title="Permalink to this definition">¶</a></dt>
<dd><p>If results are available for this MultiJob, return them.
Otherwise, create a receipt from the Specification and return that.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.MultiJob.interrupt">
<code class="descname">interrupt</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#MultiJob.interrupt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.MultiJob.interrupt" title="Permalink to this definition">¶</a></dt>
<dd><p>Interrupt all jobs.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.MultiJob.schedule">
<code class="descname">schedule</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#MultiJob.schedule"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.MultiJob.schedule" title="Permalink to this definition">¶</a></dt>
<dd><p>Scheduling start function</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.scheduler.Scheduler">
<em class="property">class </em><code class="descclassname">mplane.scheduler.</code><code class="descname">Scheduler</code><span class="sig-paren">(</span><em>config=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Scheduler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Scheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>Scheduler implements the common runtime of a Component within the
reference implementation. Components register Services bound to
Capabilities with add_service(), and submit jobs for scheduling using
submit_job().</p>
<dl class="method">
<dt id="mplane.scheduler.Scheduler.add_service">
<code class="descname">add_service</code><span class="sig-paren">(</span><em>service</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Scheduler.add_service"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Scheduler.add_service" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a service to this Scheduler</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Scheduler.capability_for_key">
<code class="descname">capability_for_key</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Scheduler.capability_for_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Scheduler.capability_for_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a capability for a given key.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Scheduler.capability_keys">
<code class="descname">capability_keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Scheduler.capability_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Scheduler.capability_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return keys (tokens) for the set of cached capabilities
provided by this scheduler&#8217;s services.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Scheduler.job_for_message">
<code class="descname">job_for_message</code><span class="sig-paren">(</span><em>msg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Scheduler.job_for_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Scheduler.job_for_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a message (generally a Redemption),
return the Job matching its token.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Scheduler.process_message">
<code class="descname">process_message</code><span class="sig-paren">(</span><em>user</em>, <em>msg</em>, <em>session=None</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Scheduler.process_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Scheduler.process_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a message. If msg is a mplane.model.Specification and
the callback parameter is set to a function this function is
called with a mplane.model.Receipt each time a result is available.</p>
<p>Returns a message to send in reply.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Scheduler.prune_jobs">
<code class="descname">prune_jobs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Scheduler.prune_jobs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Scheduler.prune_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Currently does nothing. Will remove Jobs which are
finished and whose Results have been retrieved
from the scheduler in a future version.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Scheduler.submit_job">
<code class="descname">submit_job</code><span class="sig-paren">(</span><em>user</em>, <em>specification</em>, <em>session=None</em>, <em>callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Scheduler.submit_job"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Scheduler.submit_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the available Services for one which can
service the given Specification, then create and schedule
a new Job to execute the statement.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.scheduler.Service">
<em class="property">class </em><code class="descclassname">mplane.scheduler.</code><code class="descname">Service</code><span class="sig-paren">(</span><em>capability</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Service"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Service" title="Permalink to this definition">¶</a></dt>
<dd><p>A Service binds some runnable code to an
mplane.model.Capability provided by a component.</p>
<p>To use services with an mPlane scheduler, inherit from
mplane.scheduler.Service or one of its subclasses
and implement run().</p>
<dl class="method">
<dt id="mplane.scheduler.Service.capability">
<code class="descname">capability</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Service.capability"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Service.capability" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the capability belonging to this service</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Service.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>specification</em>, <em>check_interrupt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Service.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Service.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run this service given a specification which matches the capability.
This is called by the scheduler, and should be implemented by
a concrete subclass of Service.</p>
<p>The implementation should extract its parameters from a given
mplane.model.Specification, and return its result values in a
mplane.model.Result derived therefrom.</p>
<p>After each row or logically grouped set of rows, the implementation
should call the check_interrupt function to determine whether it
should stop; if this function returns True, the implementation should
terminate its processing in an orderly fashion and return its results.</p>
<p>Each method will be called within its own thread and/or process.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.scheduler.Service.set_capability_link">
<code class="descname">set_capability_link</code><span class="sig-paren">(</span><em>link</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/scheduler.html#Service.set_capability_link"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.scheduler.Service.set_capability_link" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the link section in the capability schema</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mplane-client">
<h2>module mplane.client<a class="headerlink" href="#module-mplane-client" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-mplane.client"></span><dl class="class">
<dt id="mplane.client.BaseClient">
<em class="property">class </em><code class="descclassname">mplane.client.</code><code class="descname">BaseClient</code><span class="sig-paren">(</span><em>tls_state</em>, <em>supervisor=False</em>, <em>exporter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Core implementation of a generic programmatic client.
Used for common client state management between 
Client and ClientListener; use one of these instead.</p>
<dl class="method">
<dt id="mplane.client.BaseClient.capabilities_matching_schema">
<code class="descname">capabilities_matching_schema</code><span class="sig-paren">(</span><em>schema_capability</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.capabilities_matching_schema"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.capabilities_matching_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a capability, return <em>all</em> known capabilities matching the 
given schema capability. A capability matches a schema capability 
if and only if: (1) the capability schemas match and (2) all
constraints in the capability are contained by all constraints
in the schema capability.</p>
<p>Used to programmatically select capabilities matching an
aggregation or other collection operation (e.g. at a supervisor).</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.capability_for">
<code class="descname">capability_for</code><span class="sig-paren">(</span><em>token_or_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.capability_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.capability_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a capability given a token or label.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.capability_labels">
<code class="descname">capability_labels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.capability_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.capability_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>list all labels for stored capabilities</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.capability_tokens">
<code class="descname">capability_tokens</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.capability_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.capability_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>list all tokens for stored capabilities</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.forget">
<code class="descname">forget</code><span class="sig-paren">(</span><em>token_or_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.forget"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.forget" title="Permalink to this definition">¶</a></dt>
<dd><p>forget all receipts and results for the given token or label</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.handle_message">
<code class="descname">handle_message</code><span class="sig-paren">(</span><em>msg</em>, <em>identity=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.handle_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.handle_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a message. Used internally to process 
mPlane messages received from a component. Can also be used 
to inject messages into a client&#8217;s state.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.identity_for">
<code class="descname">identity_for</code><span class="sig-paren">(</span><em>token_or_label</em>, <em>receipt=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.identity_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.identity_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an identity given a capability token or label, or a receipt token.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.receipt_labels">
<code class="descname">receipt_labels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.receipt_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.receipt_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>list all labels for outstanding receipts</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.receipt_tokens">
<code class="descname">receipt_tokens</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.receipt_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.receipt_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>list all tokens for outstanding receipts</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.result_for">
<code class="descname">result_for</code><span class="sig-paren">(</span><em>token_or_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.result_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.result_for" title="Permalink to this definition">¶</a></dt>
<dd><p>return a result for the token if available;
return the receipt for the token otherwise.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.result_labels">
<code class="descname">result_labels</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.result_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.result_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>list all labels for stored results</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.BaseClient.result_tokens">
<code class="descname">result_tokens</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#BaseClient.result_tokens"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.BaseClient.result_tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>list all tokens for stored results</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.client.CrawlParser">
<em class="property">class </em><code class="descclassname">mplane.client.</code><code class="descname">CrawlParser</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#CrawlParser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.CrawlParser" title="Permalink to this definition">¶</a></dt>
<dd><p>HTML parser class to extract all URLS in a href attributes in
an HTML page. Used to extract links to Capabilities exposed
as link collections.</p>
</dd></dl>

<dl class="class">
<dt id="mplane.client.HttpInitiatorClient">
<em class="property">class </em><code class="descclassname">mplane.client.</code><code class="descname">HttpInitiatorClient</code><span class="sig-paren">(</span><em>tls_state</em>, <em>default_url=None</em>, <em>supervisor=False</em>, <em>exporter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#HttpInitiatorClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.HttpInitiatorClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Core implementation of an mPlane JSON-over-HTTP(S) client.
Supports client-initiated workflows. Intended for building 
client UIs and bots.</p>
<dl class="method">
<dt id="mplane.client.HttpInitiatorClient.invoke_capability">
<code class="descname">invoke_capability</code><span class="sig-paren">(</span><em>cap_tol</em>, <em>when</em>, <em>params</em>, <em>relabel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#HttpInitiatorClient.invoke_capability"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.HttpInitiatorClient.invoke_capability" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a capability token or label, a temporal scope, a dictionary 
of parameters, and an optional new label, derive a specification
and send it to the appropriate destination.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.HttpInitiatorClient.result_for">
<code class="descname">result_for</code><span class="sig-paren">(</span><em>token_or_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#HttpInitiatorClient.result_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.HttpInitiatorClient.result_for" title="Permalink to this definition">¶</a></dt>
<dd><p>return a result for the token if available;
attempt to redeem the receipt for the token otherwise;
if not yet redeemable, return the receipt instead.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.HttpInitiatorClient.retrieve_capabilities">
<code class="descname">retrieve_capabilities</code><span class="sig-paren">(</span><em>url</em>, <em>urlchain=[]</em>, <em>pool=None</em>, <em>identity=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#HttpInitiatorClient.retrieve_capabilities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.HttpInitiatorClient.retrieve_capabilities" title="Permalink to this definition">¶</a></dt>
<dd><p>connect to the given URL, retrieve and process the 
capabilities/withdrawals found there</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.HttpInitiatorClient.send_message">
<code class="descname">send_message</code><span class="sig-paren">(</span><em>msg</em>, <em>dst_url=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#HttpInitiatorClient.send_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.HttpInitiatorClient.send_message" title="Permalink to this definition">¶</a></dt>
<dd><p>send a message, store any result in client state.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.client.HttpListenerClient">
<em class="property">class </em><code class="descclassname">mplane.client.</code><code class="descname">HttpListenerClient</code><span class="sig-paren">(</span><em>config</em>, <em>tls_state=None</em>, <em>supervisor=False</em>, <em>exporter=None</em>, <em>io_loop=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#HttpListenerClient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.HttpListenerClient" title="Permalink to this definition">¶</a></dt>
<dd><p>Core implementation of an mPlane JSON-over-HTTP(S) client.
Supports component-initiated workflows. Intended for building 
supervisors.</p>
<dl class="method">
<dt id="mplane.client.HttpListenerClient.invoke_capability">
<code class="descname">invoke_capability</code><span class="sig-paren">(</span><em>cap_tol</em>, <em>when</em>, <em>params</em>, <em>relabel=None</em>, <em>callback_when=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#HttpListenerClient.invoke_capability"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.HttpListenerClient.invoke_capability" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a capability token or label, a temporal scope, a dictionary 
of parameters, and an optional new label, derive a specification
and queue it for retrieval by the appropriate identity (i.e., the
one associated with the capability).</p>
<p>If the identity has indicated it supports callback control,
the optional callback_when parameter queues a callback spec to
schedule the next callback.</p>
</dd></dl>

<dl class="method">
<dt id="mplane.client.HttpListenerClient.listen_in_background">
<code class="descname">listen_in_background</code><span class="sig-paren">(</span><em>io_loop=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#HttpListenerClient.listen_in_background"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.HttpListenerClient.listen_in_background" title="Permalink to this definition">¶</a></dt>
<dd><p>The server listens for requests in background, while
the supervisor console remains accessible</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mplane.client.MPlaneHandler">
<em class="property">class </em><code class="descclassname">mplane.client.</code><code class="descname">MPlaneHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#MPlaneHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.MPlaneHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract tornado RequestHandler that allows a
handler to respond with an mPlane Message.</p>
</dd></dl>

<dl class="class">
<dt id="mplane.client.RegistrationHandler">
<em class="property">class </em><code class="descclassname">mplane.client.</code><code class="descname">RegistrationHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#RegistrationHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.RegistrationHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the probes that want to register to this supervisor
Each capability is registered indipendently</p>
</dd></dl>

<dl class="class">
<dt id="mplane.client.ResultHandler">
<em class="property">class </em><code class="descclassname">mplane.client.</code><code class="descname">ResultHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#ResultHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.ResultHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives results of specifications</p>
</dd></dl>

<dl class="class">
<dt id="mplane.client.SpecificationHandler">
<em class="property">class </em><code class="descclassname">mplane.client.</code><code class="descname">SpecificationHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/client.html#SpecificationHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.client.SpecificationHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Exposes the specifications, that will be periodically pulled by the
components</p>
</dd></dl>

</div>
<div class="section" id="module-mplane-component">
<h2>module mplane.component<a class="headerlink" href="#module-mplane-component" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-mplane.component"></span><dl class="class">
<dt id="mplane.component.DiscoveryHandler">
<em class="property">class </em><code class="descclassname">mplane.component.</code><code class="descname">DiscoveryHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/component.html#DiscoveryHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.component.DiscoveryHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Exposes the capabilities registered with a given scheduler.
URIs ending with &#8220;capability&#8221; will result in an HTML page
listing links to each capability.</p>
</dd></dl>

<dl class="class">
<dt id="mplane.component.MPlaneHandler">
<em class="property">class </em><code class="descclassname">mplane.component.</code><code class="descname">MPlaneHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/component.html#MPlaneHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.component.MPlaneHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract tornado RequestHandler that allows a
handler to respond with an mPlane Message.</p>
</dd></dl>

<dl class="class">
<dt id="mplane.component.MessagePostHandler">
<em class="property">class </em><code class="descclassname">mplane.component.</code><code class="descname">MessagePostHandler</code><span class="sig-paren">(</span><em>application</em>, <em>request</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mplane/component.html#MessagePostHandler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mplane.component.MessagePostHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives mPlane messages POSTed from a client, and passes them to a
scheduler for processing. After waiting for a specified delay to see
if a Result is immediately available, returns a receipt for future
redemption.</p>
</dd></dl>

</div>
<div class="section" id="mpcli-command-line-client">
<h2><cite>mpcli</cite> command-line client<a class="headerlink" href="#mpcli-command-line-client" title="Permalink to this headline">¶</a></h2>
<p>The mPlane Client Shell is a simple client intended for debugging of mPlane infrastructures. To start it, simply run <code class="docutils literal"><span class="pre">mpcli</span></code>. It supports the following commands:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">seturl</span></code>: Set the default URL for sending specifications and redemptions (when not given in a Capability&#8217;s or Receipt&#8217;s link section)</li>
<li><code class="docutils literal"><span class="pre">getcap</span></code>: Retrieve capabilities and withdrawals from a given URL, and process them.</li>
<li><code class="docutils literal"><span class="pre">listcap</span></code>: List available capabilities</li>
<li><code class="docutils literal"><span class="pre">showcap</span></code>: Show the details of a capability given its label or token</li>
<li><code class="docutils literal"><span class="pre">when</span></code>: Set the temporal scope for a subsequent <cite>runcap</cite> command</li>
<li><code class="docutils literal"><span class="pre">set</span></code>: Set a default parameter value for a subsequent <cite>runcap</cite> command</li>
<li><code class="docutils literal"><span class="pre">unset</span></code>: Unset a previously set default parameter value</li>
<li><code class="docutils literal"><span class="pre">show</span></code>: Show a previously set default parameter value</li>
<li><code class="docutils literal"><span class="pre">runcap</span></code>: Run a capability given its label or token</li>
<li><code class="docutils literal"><span class="pre">listmeas</span></code>: List known measurements (receipts and results)</li>
<li><code class="docutils literal"><span class="pre">showmeas</span></code>: Show the details of a measurement given its label or token.</li>
<li><code class="docutils literal"><span class="pre">tbenable</span></code>: Enable tracebacks for subsequent exceptions. Used for client debugging.</li>
</ul>
</div>
<div class="section" id="mpcom-component-runtime">
<h2><cite>mpcom</cite> component runtime<a class="headerlink" href="#mpcom-component-runtime" title="Permalink to this headline">¶</a></h2>
<p>The component runtime provides a framework for building components for both component-initiated and client-initiated workflows. To implement a component for use with this framework:</p>
<ul class="simple">
<li>Implement each measurement, query, or other action performed by the component as a subclass of <a class="reference internal" href="#mplane.scheduler.Service" title="mplane.scheduler.Service"><code class="xref py py-class docutils literal"><span class="pre">mplane.scheduler.Service</span></code></a>. Each service is bound to a single capability. Your service must implement at least <a class="reference internal" href="#mplane.scheduler.Service.run" title="mplane.scheduler.Service.run"><code class="xref py py-func docutils literal"><span class="pre">mplane.scheduler.Service.run()</span></code></a>.</li>
<li>Implement a <code class="docutils literal"><span class="pre">services</span></code> function in your module that takes a set of keyword arguments derived from the configuration file section, and returns a list of Services provided by your component. For example:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">service</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">MyFirstService</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;local-ip-address&#39;</span><span class="p">]),</span>
            <span class="n">MySecondService</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;local-ip-address&#39;</span><span class="p">])]</span>
</pre></div>
</div>
<ul class="simple">
<li>Create a module section in the component configuration file; for example if your module is called <code class="docutils literal"><span class="pre">mplane.components.mycomponent</span></code>:</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>[service_mycomponent]
module: mplane.components.mycomponent
local-ip-address: 10.2.3.4
</pre></div>
</div>
<ul class="simple">
<li>Run <code class="docutils literal"><span class="pre">mpcom</span></code> to start your component. The <code class="docutils literal"><span class="pre">--config</span></code> argument points to the configuration file to use.</li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span>Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span>Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span>Search Page</span></a></li>
</ul>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="#">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2013-2015, mPlane Consortium.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>